{"title":"Using Rvest to Create a Product Code Translator","markdown":{"yaml":{"title":"Using Rvest to Create a Product Code Translator","image":"DataTransfers.jpeg","author":"Victor Lao","date":"2023-03-28","output":{"blogdown::html_page":{"toc":true}}},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n\nWebpages remain a key source of information in the digital age (think Wikipedia). For repetitive tasks is inefficient to manually interact with these sources of information. Thankfully, web scraping tools exist that help to make retrieving information from the internet easier.\n\nA recent problem I came across was the conversion of product codes from one manufacturer to another. Different vendors have different naming conventions for the same part. These vendors typically have online resources for converting competitor product names into their own. To accomplish the task of converting our own product list, I developed a small scrapper using the \"rvest\" package to automate translation.\n\n## Repository Link\n\n<https://github.com/Spingelhoff/leviton_crossreference_scraper>\n\n## Methodology\n\nThe goal of the project was to create a re-usable system that would be able to read an arbitrary amount of source items and convert them into the closest equivalent of another vendor. The fileR package (personal package) was used to standardize input and output into directories. The rvest package was used to extract relevant information (in this case the equivalent product code).\n\nThe reference manual was served on static pages. The URL changed predictably with each search query. This allowed for the programmatic generation of URL links from a list of source items.\n\n```{r eval=FALSE, include=TRUE}\naccess_lev_reference <- function(product) {\n\n  html_search_start <- \"https://www.leviton.com/en/support/resources-tools/manufacturer-cross-reference?id-upc=\"\n  html_search_end <- \"&itemsPerPage=1&page=1\"\n\n  html_link <- str_c(\n    html_search_start,\n    product,\n    html_search_end\n  )\n\n  read_html(html_link)\n}\n```\n\nThis collection of links can then be scraped for translations by targeting the relevant element (using CS selectors).\n\n```{r eval=FALSE, include=TRUE}\ncrawl_nodes_for_lev <- function(x) {\n  result <- x |>\n    html_elements(\".ss-md.product__title\") |>\n    html_element(\"a\") |>\n    html_attr(\"href\") |>\n    str_remove(\"/en/products/\") |>\n    str_to_upper() |>\n    as.character() # coerce from list to character to allow for row binding\n\n  prefixed_result <- str_c(\n    \"LEV-\",\n    result\n  )\n\n  standardized_result <- if(!length(prefixed_result) == 1) {\n    \"NO MATCH FOUND\"\n  } else {\n    prefixed_result\n  }\n}\n```\n\n## Citations\n\nLao V (2023) *fileR: A Pipeable Interface To Directory Creation and Use*. R package, <https://github.com/Spingelhoff/fileR>.\n\nWickham H (2022). *rvest: Easily Harvest (Scrape) Web Pages*. R package version 1.0.3, <https://CRAN.R-project.org/package=rvest>.\n","srcMarkdownNoYaml":"\n\n## Introduction\n\nWebpages remain a key source of information in the digital age (think Wikipedia). For repetitive tasks is inefficient to manually interact with these sources of information. Thankfully, web scraping tools exist that help to make retrieving information from the internet easier.\n\nA recent problem I came across was the conversion of product codes from one manufacturer to another. Different vendors have different naming conventions for the same part. These vendors typically have online resources for converting competitor product names into their own. To accomplish the task of converting our own product list, I developed a small scrapper using the \"rvest\" package to automate translation.\n\n## Repository Link\n\n<https://github.com/Spingelhoff/leviton_crossreference_scraper>\n\n## Methodology\n\nThe goal of the project was to create a re-usable system that would be able to read an arbitrary amount of source items and convert them into the closest equivalent of another vendor. The fileR package (personal package) was used to standardize input and output into directories. The rvest package was used to extract relevant information (in this case the equivalent product code).\n\nThe reference manual was served on static pages. The URL changed predictably with each search query. This allowed for the programmatic generation of URL links from a list of source items.\n\n```{r eval=FALSE, include=TRUE}\naccess_lev_reference <- function(product) {\n\n  html_search_start <- \"https://www.leviton.com/en/support/resources-tools/manufacturer-cross-reference?id-upc=\"\n  html_search_end <- \"&itemsPerPage=1&page=1\"\n\n  html_link <- str_c(\n    html_search_start,\n    product,\n    html_search_end\n  )\n\n  read_html(html_link)\n}\n```\n\nThis collection of links can then be scraped for translations by targeting the relevant element (using CS selectors).\n\n```{r eval=FALSE, include=TRUE}\ncrawl_nodes_for_lev <- function(x) {\n  result <- x |>\n    html_elements(\".ss-md.product__title\") |>\n    html_element(\"a\") |>\n    html_attr(\"href\") |>\n    str_remove(\"/en/products/\") |>\n    str_to_upper() |>\n    as.character() # coerce from list to character to allow for row binding\n\n  prefixed_result <- str_c(\n    \"LEV-\",\n    result\n  )\n\n  standardized_result <- if(!length(prefixed_result) == 1) {\n    \"NO MATCH FOUND\"\n  } else {\n    prefixed_result\n  }\n}\n```\n\n## Citations\n\nLao V (2023) *fileR: A Pipeable Interface To Directory Creation and Use*. R package, <https://github.com/Spingelhoff/fileR>.\n\nWickham H (2022). *rvest: Easily Harvest (Scrape) Web Pages*. R package version 1.0.3, <https://CRAN.R-project.org/package=rvest>.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":{"blogdown::html_page":{"toc":true}},"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":false,"output-file":"leviton_crossreference_scrape.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.555","editor":"visual","theme":"lux","title":"Using Rvest to Create a Product Code Translator","image":"DataTransfers.jpeg","author":"Victor Lao","date":"2023-03-28"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}